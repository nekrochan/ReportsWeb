input {
    tcp {
        port => 4561
        codec => json
    }
}

filter {
    json {
        source => "message"
        skip_on_invalid_json => true
    }
    mutate {
        remove_field => [ "body" ]
    }
}

output {
    stdout {
        codec => rubydebug
    }

    opensearch {
        hosts => ["opensearch:9200"]
        index => "service-logs"
    }
}